<!DOCTYPE html>

<html>
    <head>
		<title>Trouvetavierge.com</title>
        <link rel="stylesheet" type="text/css" href="css/pageaccueil.css">
    </head>
	
    <body>
		<nav id="menu">
			<ul>
				<li><a href="monprofil.php">Profil</a></li>
				<li><a href="pageabonnement.php">Abonnement</a></li>
				<li><a href="pagederecherchepseudo.html">Recherche</a></li>
				<li><a href="pagemessagerie.html">Messagerie</a></li>
				<li><a href="deconnexion.php">Deconnexion</a></li>
			</ul>
		</nav>
		<a href="debloquer_utilisateur.html">Débloquer</a>
		<a href="pagevisites.html"></a>
		<h1> Bienvenue ! </h1>
	</br>

		<h2>Voici les récents inscrits :</h2>
	</br>
		<div id="elements">

		</div>
		<script>
        
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var utilisateurs = JSON.parse(xhr.response);		
					
		
					utilisateurs.forEach(element => {
						var utilisateurDiv = document.createElement('div');
			utilisateurDiv.innerHTML = `
							Pseudo: ${element.Pseudo}<br>
							Sexe: ${element.Sexe}<br>
							Date d'inscription: ${element.Date_inscription}<br>
							Profession: ${element.Profession}<br>
							Ville: ${element.Ville}<br>
							Description: ${element.Description}
						`;
						var div=document.getElementById("elements");
						div.appendChild(utilisateurDiv);

						var profilLien = document.createElement('a');
                    profilLien.href = 'pageprofil.html?user=' + encodeURIComponent(element.Pseudo);
                    profilLien.appendChild(utilisateurDiv);

                
                    var div = document.getElementById("elements");
            div.appendChild(profilLien);
					}); 
						
		}
		
			
		
					
		
				
			};
			xhr.open("GET", "10utilisateurs.php", true);
			xhr.send();
		
		
			</script>
    </body>
</html>
